window.__require=function t(e,r,o){function i(s,c){if(!r[s]){if(!e[s]){var h=s.split("/");if(h=h[h.length-1],!e[h]){var f="function"==typeof __require&&__require;if(!c&&f)return f(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+s+"'")}}var a=r[s]={exports:{}};e[s][0].call(a.exports,function(t){return i(e[s][1][t]||t)},a,a.exports,t,e,r,o)}return r[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({ChartRef:[function(t,e,r){"use strict";cc._RF.push(e,"5b897ABG+ZMHYFxeZ1GdWu7","ChartRef");var o=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,r,o){var i,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(n<3?i(s):n>3?i(e,r,s):i(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,h=(n.executeInEditMode,t("./SegmentsMesh")),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.line=null,e.cursor=null,e.sCursor=null,e.mask=null,e.mGreen=null,e.mRed=null,e.sGreen=null,e.sRed=null,e.bgResult=null,e.lbResult=null,e.sArrow=null,e.offsetY=0,e.hCurrent=0,e.config=null,e.t=null,e}return o(e,t),e.prototype.init=function(t){var e=this.line;this.config=t,e.initWithMesh(t.width,t.height+t.offsetBot,t.widthSegments,t.heightSegments)},e.prototype.setData=function(t){var e=this.line,r=this.config;this.t=t,this.offsetY=0,this.hCurrent=t[0];for(var o=r.widthSegments,i=r.offsetBot,n=0;n<=o;n++){var s=t[n];e.vertexes[e.refPos[n][2]].y=s,e.vertexes[e.refPos[n][1]].y=s-5,e.vertexes[e.refPos[n][0]].y=-i}e.applyVertexes()},e.prototype.renderChart=function(t){var e=this.mask,r=this.cursor,o=this.config,i=this.t;if(e&&r&&i){var n=o.width,s=o.height,c=o.widthSegments,h=e.node.getContentSize();h.width=t,e.node.setContentSize(h);var f,a=i.length-1,u=0;if(t>=n)u=i[a],f=cc.v2(.5*n,.5*-s+u);else{var p=t/n*c,l=i[a=cc.misc.clampf(Math.floor(t/n*c),0,this.t.length-1)],d=l;a<i.length-1&&(d=i[a+1]);var v=p-a;u=l+(v=cc.misc.clampf(v,0,1))*(d-l),f=cc.v2(.5*-n+t,.5*-s+u)}var y=.2*s,g=.2*-s;f.y>y?this.offsetY=y-f.y:f.y<g&&(this.offsetY=g-f.y),this.hCurrent=f.y,f.y=this.hCurrent+this.offsetY,r.position=f,this.line.node.position=cc.v2(0,.5*-o.height+this.offsetY),this.setResult(u-i[0])}},e.prototype.refreshOffset=function(t){var e=this.cursor,r=this.config;this.offsetY=t,e.position=cc.v2(e.position.x,this.hCurrent+this.offsetY),this.line.node.position=cc.v2(0,.5*-r.height+this.offsetY)},e.prototype.setResult=function(t){if(this.mGreen&&this.sGreen&&this.sCursor){var e=t>=0;if(this.line.renderer.setMaterial(0,e?this.mGreen:this.mRed),this.cursor.active&&(this.sCursor.spriteFrame=e?this.sGreen:this.sRed),this.bgResult&&(this.bgResult.color=e?cc.color(0,172,0,255):cc.color(172,0,0,255)),this.lbResult){var r=100/(.5*this.config.height),o=Math.round(Math.abs(t)*r);this.lbResult.string=o+"%"}this.sArrow&&(this.sArrow.scaleY=e?1:-1)}},i([c(h.default)],e.prototype,"line",void 0),i([c(cc.Node)],e.prototype,"cursor",void 0),i([c(cc.Sprite)],e.prototype,"sCursor",void 0),i([c(cc.Mask)],e.prototype,"mask",void 0),i([c(cc.Material)],e.prototype,"mGreen",void 0),i([c(cc.Material)],e.prototype,"mRed",void 0),i([c(cc.SpriteFrame)],e.prototype,"sGreen",void 0),i([c(cc.SpriteFrame)],e.prototype,"sRed",void 0),i([c(cc.Node)],e.prototype,"bgResult",void 0),i([c(cc.Label)],e.prototype,"lbResult",void 0),i([c(cc.Node)],e.prototype,"sArrow",void 0),e=i([s],e)}(cc.Component);r.default=f,cc._RF.pop()},{"./SegmentsMesh":"SegmentsMesh"}],Helloworld:[function(t,e,r){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var o=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,r,o){var i,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(n<3?i(s):n>3?i(e,r,s):i(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return o(e,t),e.prototype.start=function(){this.label.string=this.text},i([c(cc.Label)],e.prototype,"label",void 0),i([c],e.prototype,"text",void 0),e=i([s],e)}(cc.Component);r.default=h,cc._RF.pop()},{}],LineChart:[function(t,e,r){"use strict";cc._RF.push(e,"8b3f99q3TlCcr7iM26OxvJ9","LineChart");var o=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,r,o){var i,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(n<3?i(s):n>3?i(e,r,s):i(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var n=t("./ChartRef"),s=cc._decorator,c=s.ccclass,h=s.property,f=s.executeInEditMode,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chartRefA=null,e.chartRefB=null,e.centerLine=null,e._process=0,e.duration=1e4,e.offsetHGen=15,e.tLast=null,e.tCurrent=null,e.aniEnd=null,e.config={width:500,height:300,widthSegments:40,heightSegments:2,offsetBot:500},e.isTargetA=!0,e}return o(e,t),Object.defineProperty(e.prototype,"process",{get:function(){return this._process},set:function(t){this._process=cc.misc.clampf(t,0,this.config.width)},enumerable:!0,configurable:!0}),e.prototype.getChart=function(){return{chartTarget:this.isTargetA?this.chartRefA:this.chartRefB,chartSub:this.isTargetA?this.chartRefB:this.chartRefA}},e.prototype.onLoad=function(){var t=this.config,e=this.node.getContentSize();t.width=e.width,t.height=e.height,this.chartRefA.init(t),this.chartRefB.init(t),this.startChart(),this.renderChartMove()},e.prototype.startChart=function(){var t=this.config.width,e=this.getChart(),r=e.chartTarget,o=e.chartSub;this.genT(),this.process=0,this.timeBegin=Date.now(),this.timeEnd=this.timeBegin+this.duration,r.setData(this.tCurrent),r.node.active=!0,r.node.position=cc.v2(0,0),r.renderChart(0),o.setData(this.tLast),o.node.active=!0,o.node.position=cc.v2(-t,0),o.renderChart(t),o.refreshOffset(-o.hCurrent),o.cursor.active=!1},e.prototype.genT=function(){this.tCurrent?this.tLast=this.tCurrent:this.tLast=this.GenT2(),this.tCurrent=this.GenT2()},e.prototype.GenT2=function(){for(var t=this.config,e=t.height,r=t.widthSegments,o=.5*e+2.5,i=1,n=[],s=0;s<=r;s++){s%5==0&&s<.5*r&&(i=Math.random()>.5?1:-1),n.push(o);this.offsetHGen;s>=.5*r&&s<=.8*r&&1.5,o+=i*Math.floor(Math.random()*this.offsetHGen)}return n},e.prototype.update=function(t){if(this.aniEnd)this.moveToBegin();else{var e=Date.now(),r=(e-this.timeBegin)/this.duration;if(this.process=r*this.config.width,this.renderChartMove(),e>this.timeEnd+500){var o=this.chartRefA;this.aniEnd={timeBegin:e,duration:500,offsetFrom:o.offsetY,offsetTo:o.offsetY-o.cursor.position.y}}}},e.prototype.renderChartMove=function(){var t=this.getChart(),e=t.chartTarget,r=t.chartSub;e.renderChart(this.process),this.centerLine.position=cc.v2(0,e.offsetY),r.refreshOffset(-r.hCurrent+e.offsetY)},e.prototype.moveToBegin=function(){var t=Date.now(),e=this.config,r=this.aniEnd,o=(t-r.timeBegin)/r.duration;o>=1&&(o=1),this.centerLine.position=cc.v2(0,(1-o)*r.offsetFrom);var i=this.getChart(),n=i.chartTarget,s=i.chartSub;n.refreshOffset(cc.misc.lerp(r.offsetFrom,r.offsetTo,o));var c=-o*e.width;n.node.position=cc.v2(c,0),s.node.position=cc.v2(c-e.width,0),t>r.timeBegin+r.duration+500&&(this.aniEnd=null,this.startChart())},i([h(n.default)],e.prototype,"chartRefA",void 0),i([h(n.default)],e.prototype,"chartRefB",void 0),i([h(cc.Node)],e.prototype,"centerLine",void 0),i([h],e.prototype,"_process",void 0),i([h],e.prototype,"process",null),e=i([c,f],e)}(cc.Component);r.default=a,cc._RF.pop()},{"./ChartRef":"ChartRef"}],SegmentsMesh:[function(t,e,r){"use strict";cc._RF.push(e,"a252e2qbxpOlrZbGACM6j4V","SegmentsMesh");var o=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,r,o){var i,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(n<3?i(s):n>3?i(e,r,s):i(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=(n.property,n.executeInEditMode,cc.gfx);function h(t,e,r,o){void 0===t&&(t=10),void 0===e&&(e=10),void 0===r&&(r=2),void 0===o&&(o=2);for(var i=.5*t,n=.5*e,s=[],c=[],h=[],f=[],a=cc.v3(-i,n,0),u=cc.v3(i,n,0),p=cc.v3(-i,-n,0),l=[],d=0;d<=r;d++)l.push(new Array(o+1));for(var v=0;v<=o;v++)for(d=0;d<=r;d++){var y=d/r,g=v/o,_=a.lerp(u,y),m=a.lerp(p,g).sub(a),R=_.add(m);if(l[d][o-v]=s.length,s.push(cc.v3(R.x+i,R.y,R.z)),c.push(0,1,0),h.push(y,g),d<r&&v<o){var b=r+1,C=d+v*b,O=d+(v+1)*b,w=d+1+(v+1)*b,T=d+1+v*b;f.push(C,T,O),f.push(T,w,O)}}return{positions:s,normals:c,uvs:h,indices:f,refPos:l}}var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){},e.prototype.initWithMesh=function(t,e,r,o){void 0===t&&(t=10),void 0===e&&(e=10),void 0===r&&(r=2),void 0===o&&(o=2);var i=h(t,e,r,o);this.vertexes=i.positions,this.refPos=i.refPos;var n=new c.VertexFormat([{name:c.ATTR_POSITION,type:c.ATTR_TYPE_FLOAT32,num:3},{name:c.ATTR_UV0,type:c.ATTR_TYPE_FLOAT32,num:2}]),s=new cc.Mesh;s.init(n,this.vertexes.length,!0),this.mesh=s,s.setVertices(c.ATTR_POSITION,this.vertexes),s.setVertices(c.ATTR_UV0,i.uvs),s.setIndices(i.indices),this.colours=[];for(var f=0;f<this.vertexes.length;f++)this.colours.push(cc.Color.WHITE);this.mesh=s;var a=this.node.getComponent(cc.MeshRenderer);a.mesh=this.mesh,this.renderer=a,cc.log("initWithMesh success!")},e.prototype.applyVertexes=function(){this.mesh.setVertices(c.ATTR_POSITION,this.vertexes)},e=i([s],e)}(cc.Component);r.default=f,cc._RF.pop()},{}]},{},["ChartRef","LineChart","SegmentsMesh","Helloworld"]);